  #########################################################
  # ADMIN APIs
  #########################################################
paths:
  notifications:
    get:
      tags: [Admin]
      summary: Liste aller gespeicherten Notifications
      parameters:
        - name: limit
          in: query
          schema: { type: integer, default: 20 }
        - name: offset
          in: query
          schema: { type: integer, default: 0 }
        - name: sort
          in: query
          schema: { type: string, default: "created_at" }
      responses:
        '200':
          description: Liste der Notifications
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '../schemas.yaml#/components/schemas/NotificationOverview'

    post:
      tags: [Admin]
      summary: Neue Notification anlegen
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '../schemas.yaml#/components/schemas/NotificationCreation'
      responses:
        '201':
          description: Notification erfolgreich erstellt

  notifications/{id}:
    get:
      tags: [Admin]
      summary: Details einer Notification abrufen
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        '200':
          description: Notification gefunden
          content:
            application/json:
              schema:
                $ref: '../schemas.yaml#/components/schemas/NotificationDetails'
        '404':
          description: Notification nicht gefunden

    delete:
      tags: [Admin]
      summary: Löscht eine Notification
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        '204':
          description: Notification gelöscht

  notifications/{id}/stats:
    get:
      tags: [Admin]
      summary: Statistikdaten zu einer Notification
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        '200':
          description: Statistik erfolgreich abgefragt
          content:
            application/json:
              schema:
                $ref: '../schemas.yaml#/components/schemas/NotificationStats'
        '404':
          description: Notification nicht gefunden

  triggers:
    get:
      tags: [Admin]
      summary: Auflistung aller Triggers
      responses:
        '200':
          description: Liste aller Triggers
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '../schemas.yaml#/components/schemas/TriggerExpanded'

    post:
      tags: [Admin]
      summary: Neuen Trigger erstellen
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '../schemas.yaml#/components/schemas/TriggerCreation'
      responses:
        '201':
          description: Trigger erfolgreich angelegt

  groups:
    get:
      tags: [Admin]
      summary: Liste aller Gruppen mit Level, XP, Streak
      responses:
        '200':
          description: Erfolgreich abgerufen
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '../schemas.yaml#/components/schemas/GroupStats'

    post:
      tags: [Admin]
      summary: Neue Gruppe anlegen
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string, example: "Pi07" }
                data_table: { type: string, example: "sensor_07_data" }
      responses:
        '201':
          description: Gruppe erfolgreich erstellt

  achievements:
    get:
      tags: [Admin]
      summary: Alle Achievements anzeigen
      responses:
        '200':
          description: Liste aller Achievements
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '../schemas.yaml#/components/schemas/Achievement'

    post:
      tags: [Admin]
      summary: Neues Achievement anlegen
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '../schemas.yaml#/components/schemas/AchievementCreation'
      responses:
        '201':
          description: Achievement erfolgreich erstellt
